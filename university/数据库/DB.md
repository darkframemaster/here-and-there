#数据库
##一.数据库系统概述
###1.1.1
**数据（data）**是描述事物的符号记录，是信息的载体，是信息的具体表现形式。

**数据处理（data process）**是指将数据转换成信息的过程，也称信息处理。

###1.1.2
数据库技术的三个发展阶段：

* 人工管理阶段
* 文件系统阶段
* 数据库系统阶段
	
**数据库系统的特点**：
		
* 数据结构化		
* 较高的数据共享性
* 较高的数据独立性
* 数据由DBMS统一管理和控制

###1.2
**数据库**指长期存储在计算机内有组织的，可共享的数据集合。

###1.2.1数据库系统的组成
**数据库系统**是指在计算机系统中引入数据库后的系统。

数据库系统的**构成**：

* **数据库（database）**：就是存放数据的仓库。
* **数据库管理系统**
* 数据开发工具
* 数据库应用系统
* 数据库管理员
* 用户

###1.2.2数据库管理系统的功能

* 1.数据定义和操作功能（**DDL AND DML**）
* 2.数据库运行控制功能 (**数据的完整性，安全性，一致性，多用户使用**)
* 3.数据库的组织，存储和管理
* 4.建立和维护数据库
* 5.数据通讯接口

###1.3数据库的体系结构
数据库的三级模式结构：（数据库的三个抽象级别）

* 外模式（子模式或用户模式）：对数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述。。
* 模式（概念模式或逻辑模式）：对数据库中全部数据的逻辑结构和特征的描述，是所有用户的公共数据视图。一个数据库只有一个模式。
* 内模式（存储模式或物理模式）：对数据物理结构和存储方式的描述，是数据在数据库内部的表示方式，一个数据库只有一个内模式。

数据库的两级映像：

* 外模式/模式映像：每个外模式，数据库系统都有一个外模式/模式映像。保证了数据和程序的逻辑独立性。**简称逻辑数据独立性**。
* 模式/内模式：数据库中只有一个模式，也只有一个内模式，所以模式/内模式映像是唯一的，它定义了数据库全局逻辑结构与存储结构之间的对应关系。**保证数据与程序的物理独立性**。


##二.数据模型
###2.1信息的三种世界
* 现实世界
* 信息世界
* 数据世界

**现实世界->信息世界（概念模型 ER图）->数据世界（DBMS支持的数据模型）**

###2.2概念模型
**实体（entity）：**客观存在并可以相互区分的事物。

**属性（attribute）：**是实体所具有的某些特性。

**码（key）：**一个属性或属性集能够唯一标识整个属性集合，则称该属性或者属性集为该实体的码。

**实体型（entity type）：**用实体名及其属性名集合来抽象和刻画同类实体。ex:学生(学号，姓名...)

**实体集（entity set）：**同型实体的集合称为实体集。ex：所有学生

**联系（relationship）：**用E-R图（Entity-Relationship）实体联系图，来表示**概念模型**。

###2.3数据模型
**数据模型**通常由**数据结构（静态），数据操作（动态），数据完整性约束**三个部分组成。

数据完整性约束：

* **实体完整性约束：主码不能为空。**
* **参照完整性约束：外码的取值要么是对应主码的取值，要么为Null**

###2.3.1层次模型
###2.3.2网状模型
###2.3.3关系数据模型
* 关系
* 元组
* 属性
* 域：属性的取值范围
* 关系模式
* 码
* 候选码
* 主码
* 主属性和非主属性：候选码中的所有属性都叫主属性。
* 外码

##三.关系数据库
###关系模式（逻辑设计阶段）
>关系的描述称为关系模式。一个关系模式应当是一个五元组**（关系名，属性，属性名，属性长度，关键字）**。关系模式一般简记为R（A1，...，An）
A为属性名，R为关系名。


###关系运算（关系运算的结果是集合，没有所有属性都相同的行）
* 选择运算（等价于where）
* 投影运算（等价于select （distinct ATTRIBUTE））
* 自然连接，seta连接，外连接（注意有相同属性的）
* 除法（包含关系）
* Assignment Operation（左箭头表示，相当于update）

**五种基本运算：**并，差，选择，投影，乘积（笛卡尔乘积）。
>符号的表示看课本，笔记。

##四.关系规约化基础
###4.1数据依赖
* **函数依赖**（function dependency）
* 多值依赖
* 连接依赖

###4.2关系规范化
关系模式规范化的目的是解决关系模式中存在的**数据冗余，插入和删除异常，更新异常的问题**。

###4.2.2常用的三种范式
**1.第一范式（1NF）**
>定义：设R是一个关系模式。如果R的每个关系r的每个属性的值域都是不可分割的简单数据项的集合，则称这个关系模式属于第一范式。

>1NF是规范化最低的范式，它**要求无重复记录，字段不可分解**。具有**原子性**

**2.第二范式（2NF）**
>定义：如果关系模式R是第一范式，且它的每个非主属性都完全函数依赖于码，则称R为满足第二范式的模式。

>不存在部分函数依赖

**3.第三范式（3NF）**
>定义如果关系模式R是第二范式，且没有一个非主属性传递函数依赖于码，则称R为满足第三范式的模式。

>不存在传递函数依赖，不存在非主属性的关系模式一定是第三范式。

**4.BC范式**
>消除关系中主属性对码的部分函数依赖和传递函数依赖。

##五.数据库设计
**数据库可分为六个阶段：**

* 需求分析阶段
* 概念结构设计阶段（ER图）
* 逻辑结构设计阶段（关系模式）
* 数据库物理设计阶段
* 数据库实施阶段
* 数据库运行和维护阶段

###5.2.3数据流图（Data Flow Diagram，DFD）需求分析阶段
>数据流图表达了数据和处理过程的关系，反映的是对事务处理所需的原始数据及经过处理后的数据及其流向。

###5.2.4数据字典
数据字典通常包括**数据项，数据结构，数据流，数据存储，处理过程**等五个部分。

##SQL语句
* select
	* \*号表示全选，多表时标明表名。 
* from
* join on
* where
	* between子句取代and
	* `where ()`
* group by（不能含有子查询）
* having
* like 
	* _匹配一个字符，‘___’匹配只含三个字符的字符串
	* %任意匹配 ，‘intro%’匹配开头为‘intro’的字符串
* order by
	* asc 升序（默认）
	* desc 降序

**集合运算**

* union(自动去重)
	* union all(保留重复) 
* intersect(交运算)
	* intersect all
* except(差运算)
	* except all
	
**嵌套查询**

**集合比较：**

* in
* not in
* some/any:(`=some ()`==`in ()`):部分满足
* all:(`<>all`==`not in`):完全满足

**空关系比较:**

* exists
* not exists
	* **not exists(B except A):"关系A包含关系B"** 
	
**数据库修改：**

* delete from TABLE
* insert into TABLE
* update TABLE set

##经典考题
数据库三级视图，反映了三种不同角度看待数据库的观点，用户眼中的数据库称为**外部视图**

数据库的概念模型独立于**具体的机器和DBMS**

数据库中，数据的物理独立性是指**用户的应用程序与存储在磁盘上的数据库中的数据是相互独立的**

关系模式的任何属性**不可再分**

事务的原子性是指**事务中包括的所有操作要么都做，要么都不做**
>事务的性质：ACID

>* 原子性（Autonicity）：事务中包括的所有操作要么都做，要么都不做

>* 一致性（consistency）：事务必须使数据库从一个一致性状态变到另一个一致性状态

>* 隔离性（Isolation）：一个事务内部的操作及使用的数据对并发的其他事务是隔离的

>* 持久性（Durability）：一旦提交，对数据库的改变是永久的

现实世界的**‘特征’**术语对应于数据世界的**数据项**

**关系可以为空关系**

对现实世界进行第二层抽样的模型是**结构数据模型**

描述事物的符号记录称为**数据**

**人工管理**阶段的数据是无结构的。

**文件管理**阶段数据独立性差。

**数据库管理**阶段的数据是整体结构化的。数据具有高度的物理独立性和一定程度逻辑独立性。

非关系模型中数据结构的基本单位是**基本层次结构**

数据的**正确有效和相容**称为**数据的一致性**

**数据库**的完整性是指数据的**正确性和相容性**

数据库系统软件包括**DBMS**和**数据库应用系统和开发工具**

SQL语言属于**具有关系代数和关系演算双重特点的语言**

关系演算是用**谓词**来表达查询要求的方式。

一组具有相同数据类型的值的集合称为**域**。

**关系是关系模型的一个实例**

所谓**空值是未知的值**

**sql语言**最主要的功能是**数据查询**

