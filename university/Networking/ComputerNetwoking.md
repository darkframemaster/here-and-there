## 第一章
### 协议
一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及报文发送和/或接收一条报文或其他事件所采取的动作。

### 主机和端系统
通常把与因特网相连的计算机和其他设备称为端系统，因为它们位于因特网的边缘，故而被称为端系统。

**端系统**也称为主机，主机有时又被进一步划分为两类： **客户** 和 **服务器**。

客户非正式的等同于桌面PC，移动PC和智能手机等。

服务器非正式的等同于更为强大的机器，用于存储和发布Web页面、流视频、中继电子邮件等。

数据中心 是服务器的系统集群。

### 1.2 接入网：将端系统链接到相应边缘路由器的物理链路

**边缘路由器**：端系统到任何其他远程端系统的路径上的第一台路由器

1. 家庭接入：DSL，电缆，FTTH，拨号和卫星
   - 数字用户线 **DSL （Digital Subscriber Line）** 下行快 上行慢 不对称
   - 电缆因特网接入 **（cable Internet access）**，也称混合光纤同轴 **HFC （Hybrid Fiber Coax）**
   - 光纤到户 **FTTH （Fiber To The Home）**
2. 企业（和家庭）接入：以太网和WIFI
局域网 **LAN**
	- 无线局域网 **WLAN/WIFI**
3. 广域无线接入：3G和LTE


### 1.3 分组交换和电路交换
#### 分组交换
**报文(message)**

**分组(packet)**：从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，称之为分组。

每个分组通过通信链路和**分组交换机(packet switch)**(交换机主要有两类：**路由器**(网络层链路层都有路由器)和**链路层交换机**)传送。分组以等于该**链路最大传输速率**的速度传输。

分组交换网路中的时延:**结点处理时延**，**排队时延**，**传输时延**和**传播时延**。这些时延总体累加起来是**结点总时延**。

**丢包**:在排队时，由于队列的缓存空间大小是有限的，一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了，在这种情况小会出现**分组丢失(丢包)**

#### 电路交换
在每个端系统链接的交换机中都提供一条专有的**电路**

#### 电路交换和分组交换的区别及优缺点：

- **电路交换**
    - 在通信前要在通信双方建立一条被双方独占的物理通路。
    - 优点：
        1. 通信时延小。
        2. 实时性强。
        3. 有序传输。
        4. 控制简单。
        5. 避免冲突。
    - 缺点：
		1. 连接建立时间长。
		2. 信道利用率低。
		3. 灵活性差。
- **分组交换**
    - 是以分组为单位进行传输和交换，分组交换在交换节点采用存储转发的传输方式。
    - 优点：
  		1. 加速传输。
  		2. 简化了存储管理。
  		3. 减少了出错几率和重发数据量。
    - 缺点：
        1. 存在存储转发时延。
        2. 可能存在分失序，丢失或重复分组，分组到达目的节点后，要根据编号对分组进行排序，增加了麻烦。

### 1.5 网络的5层和7层模型:
#### 五层模型：
* **应用层**：提供网络应用程序，保存应用层协议。
	* 任务：提供系统与用户的接口
	* 功能：1.文件传输 2.访问和管理 3.电子邮件服务
	* 协议：FTP,SMTP,POP3,HTTP
* **运输层**：在应用程序端点之间传送应用层报文。
	* 传输单位：报文段（TCP)
	* 任务：负责主机中两个进程之间的通信
	* 功能：1.为端到端连接提供可靠的传输服务。2.为端到端连接提供流量控制、差错检测、服务质量等管理服务
	* 协议：TCP,UDP
* **网络层**：负责将称为数据报的网络层分组从一台主机移动到别的主机。
	* 传输单位：数据报
	* 任务：1.将传输层传下来的报文段封装成分组。2.选择适当的路由，使传输层传下来的分 组能够交付到目的主机
	* 功能：1.为传输层提供服务,2.组包和拆包,3.路由选择,4.拥塞控制
	* 协议：ICMP,ARP,IP,IGMP
* **链路层**：沿路径将数据帧传递给下一个结点(源与目的地之间的一系列路由器)。
	* 传输单位：帧
	* 任务：将网络层传下来的IP数据报组装成帧
	* 功能：1.链路连接的建立、拆除、分离 2.帧定界和帧同步 3.差错检测
	* 协议：PPP,HDLC,ARQ
	* 概念：MTU（最大传输单元）
* **物理层**：将**数据帧**中的一个一个比特从一个结点移到下个结点。
	* 传输单位：比特
	* 任务：透明地传输比特流
	*　功能：为数据段设备提供传送数据通路

#### 概念
**IETF (Internet Engineering Task Force)** 因特网工程任务组

**RFC (Request For Comment)** 请求评论

**ISP (Internet Service Provider)** 因特网服务提供商

**TCP (Transmission Control Protocol)** 传输控制协议

**IP (Internet Protocol)** 网际协议


## 第二章 应用层
### 2.1.1 网络应用程序体系结构
**CS (client-server architecture)** 客户-服务器体系结构:

- 有一个总是打开的主机称为服务器
- 服务器服务于来自许多其他称为客户的主机请求
- 客户端之间不直接通信
- 服务器负担大

**P2P (P2P/(peer to peer) architecture)** P2P体系结构 ，对等方-对等方:

- 对于数据中心的专用服务器有最低依赖
- 应用程序通过主机（对等方）之间直接通信
- 有自扩展性

### 2.1.2 进程通讯
#### 1. 进程与计算机网络之间的接口
**套接字 (socket)**: 同一台主机内应用层与运输层之间的接口。套接字是建立网络应用程序的可编程接口，因此套接字也称为应用程序和网络之间的**应用程序编程接口。(API Application Programming Interface)**

#### 2. 进程寻址
主机由**IP地址（32bit）**标识，应用由目的地**端口号**标识。

### 2.1.3 可供应用程序使用的运输服务
开发应用，必须选择一种可用的运输层协议，需要考虑一下的点：

1. 可靠数据传输
2. 吞吐量
3. 定时
4. 安全性

### 2.4 因特网提供的运输服务
因特网（TCP/IP网络）为应用程序提供**两个运输层协议**，即**UDP和TCP**。因特网运输协议所**不提供吞吐量、定时保证**。

- TCP服务
	- 面向**链接**服务
	- **可靠**数据传输服务
	- 具有**拥塞控制机制**。
	- 安全：**安全套接字 SSL(Secure Sockets Layer)** 
- UDP服务
	- UCP**无连接**
	- 提供一种**不可靠**数据传输服务
	- **不包括**拥塞控制机制。


### 2.1.5 应用层协议（网络应用的一部分）
- **HTTP** 超文本传输协议(web)
    - 采用**TCP**为运输协议。
    - HTTP是一个**无状态协议**，它不保存关于客户的任何信息。
- **DNS(Domain Name System)** 域名系统
    - 通常采用**UDP**为运输协议。
    - 一种能进行主机名到IP地址转换的目录服务。
    - 构成
        - 一个由分层的DNS（DNS server）服务器实现的分布式数据库。
        - 一个使得主机能够查询分布式数据库的应用层协议。
- **FTP** 文件传输协议
    - 采用**TCP**为运输协议。
    - 双链接
        - **控制连接** 用于在两主机之间传输控制信息(如用户标识，口令，改变远程目录的命令以及put和get文件的命令)。
        - **数据连接** 用于实际发送一个文件。
- **SMTP** 简单邮件传输协议(email)
    - **SMTP是因特网电子邮件应用的核心**
    - 采用**TCP**为运输协议。
    - SMTP一般不适用中间邮件服务器发送邮件。
- **POP3**(Post Office Protocol Version3)：第三版的邮局协议。
    - POP3按三个阶段工作:
        - 特许
        - 事物处理
        - 更新
- **IMAP**: 因特网邮件访问协议


#### FTP和HTTP的区别
1. FTP使用了两个并行的TCP连接，一个是**控制连接**，一个是**数据连接**。
   	- FTP 使用一个独立的控制连接，所以我们也称FTP的控制信息是 **带外(out-of-band)** 传送的。
   	- HTTP 协议是在传输文件的同一个TCP连接中发送和响应首部行的。因此，HTTP也可以说是 **带内(in-band)** 发送控制信息的。
2. FTP的**数据连接是非持续**的，HTTP的数据连接可以是**持续的**，也可以是**非持续的**。 
3. FTP必须在整个会话期间保留用户的 **状态(state)** 而HTTP是无状态的。

#### HTTP和SMTP的区别：
1. HTTP是一个拉协议，SMTP是一个推协议。
2. SMTP要求每个报文都使用7位ASCII码格式，HTTP没有这个限制。
3. 在处理一个既包含文本又包含图形的文档时，HTTP把每个对象封装到他自己的HTTP相应报文中,而SMTP则是把所有报文对象放在一个报文之中。

#### SMTP 和 POP3
用户代理不能使用SMTP取回报文，因为去报文是一个拉操作，而SMTP是一个推协议。


#### 相关概念
**Web页面** （web page）（也叫文档）由**对象**（HTML文档，图片，音频等）组成，它们通过URL地址寻址。多数Web包含**HTML基本文件**。他的客户端为**浏览器**，服务端为**Web服务器**。



>URL地址：www.someschool.edu(host name)/somedepartment/picture(path name).


### 2.4 因特网中的电子邮件
> 电子邮件是异步通讯媒介。

电子邮件系统有3个主要部分组成:

- 用户代理(user agent)
    - 允许用户阅读，回复，转发，保存和撰写报文。
- 邮件服务器(mail server)
    - 形成了电子邮件体系结构的核心。每个接收方在其中的某个邮件服务器上有一个邮箱。**邮箱**管理并维护着这个接收方的报文。
- **SMTP** 简单邮件传输协议(Simple Mail Transfer Protocol,SMTP)
    - 是因特网电子邮件中主要的**应用层协议**。使用TCP可靠数据传输服务。每台邮件服务器上既运行SMTP的客户端也运行SMTP的服务器端。 

邮件发送过程：从发送方的用户代理开始，传输到发送方的邮件服务器，再传输到接收方的邮件服务器，然后在这里被分发到接收方的邮箱中。如果Alice的服务器不能将邮件交付给Bob的服务器，Alice的邮件服务器在一个**报文队列（message queue）**中保持报文并在以后尝试再次发送。


### 2.5 DNS:因特网的目录服务
识别主机的两种方式：通过**主机（hostname）**名或者**IP地址**。

DNS通常是运行BIND（Berkeley Internet Name Domain）软件的UNIX机器。DNS协议运行在**UDP**上。

DNS提供的其他重要服务:
**主机别名，邮件服务器别名，负载分配**

DNS采用**集中式(整个因特网使用一个DNS服务器)**设计的**弊端**：

-  **单点故障**（a single point of failure）:如果该DNS服务器崩溃，整个因特网都会瘫痪。
-  **通信容量**（traffic volume）：单个DNS服务器不得不处理所有歌DNS查询。
-  **远距离的集中式数据库**（distant centralized database）：单个DNS服务器不可能“邻近”所有查询客户。传输过程中也许还要经过低速和拥塞的链路，导致**严重时延**。
-  **维护**（maintenance）：单个DNS要保存所有的因特网主机记录，而且还不得不为解决每个新添加的主机而频繁更新。

DNS的分布式设计：

1. 分布式，层次数据库**
	- **根DNS服务器**
	- **顶级域（DNS）服务器（Top-level Domain，TLD）**
	- **权威DNS服务器**
	- **本地DNS服务器**（local DNS server）
2. DNS缓存
    - TODO

#### DNS 查询方式
TODO

### 2.6 P2P应用：
<!-- P2P体系结构的**扩展性：分发时间（distribution time）** -->

**P2P文件分发：**

- **BitTorrent** : 一种用于文件分发的流行P2P协议。（TCP连接）
	- **最稀缺优先**技术，最稀缺资源优先。均衡每个**块**（某个文件的一部分）在**洪流**中的副本数量
	- **对换算法**（响应算法），最快传输速率优先配对，在相邻的对等方中找到传输速率最快的4个对等方（这些对等方通常叫做**疏通**），然后对换资源。
	- 对换算法又叫做**一报还一报（tit-for-tat）**
- **分布式散列表(DHT)** : 分布式数据库
	- 任何对等方用一个特别的键来查询该分布式数据库。分布式数据库将定位拥有该响应（键，值）对的对等方，然后向查询的对等方返回该（键，值）对，任何对等方也将允许在数据库中插入新键-值对。这样的一种分布式数据库称为**DHT**
	- DHT的数据库分布在一些对等方上。
	- 每个对等方有一个标识符，是一个[0-2^n-1]范围内的整数，为了和标识符匹配，每个键由散列函数生成一个同一范围内的整数。键根据标识符存取，使用**最邻近**方法。如果键等于标识符，直接存，如果在两个标识符之间，存在后一个上，如果大于所有，存于最小标识符的对等方上。
	- **环形DHT：**每个对等方只需要知道它的直接后继和直接前任。但是发送的报文量较大N/2（N为对等方数），所以实际中可以添加。
	- **对等方扰动**

## 三 运输层
输层协议为运行在不同主机上的应用进程之间提供了**逻辑通信（logic communication）**。运输层协议是在**端系统**中实现的。

在发送端，运输层将从发送应用程序进程接收到的报文转换成运输层分组，用因特网的术语来讲该分组称为运输层**报文段**。

运输层的数据传输单元：**报文段（segment）**

**网络层: 主机间的逻辑通信 <---> 运输层: 进程间的逻辑通信**

### 运输层协议：
- **UDP（用户数据报协议）**
- **TCP（传输控制协议）**



**IP（internet protocol）**：

网际协议。IP的服务模型是**尽力而为交付服务（best-effort delivery sevice）**。它并不做任何确保，特别是，它不确保报文段的交付，不保证报文段的按序交付，不保证报文段中数据的完整性(IP的校验和只包括IP报文的头部，而不包括payload)。所以IP被称为**不可靠服务**，可靠性需要由上层协议来完成(TCP)。

#### IP 地址的表示
- IP 地址由网络部分和主机部分构成，网络部分分为 `A B C D E` 5个网络.
  - A 类网络，从 `0.0.0.0` - `127.255.255.255`，前 8 位标示了网络的地址，后8位为主机地址，首位固定为0，包含 128 个网络(00000000 - 01111111)，每个网络包含 2^24 台主机。
  - B 类网络，从 `128.0.0.0` - `191.255.255.255`， 前 16 位为网络地址，后 16bit 为主机地址，高位固定为 10，包含2^14个网络地址，每个网络包含 2^16 台主机
  - C 类网络，从 `192.0.0.0` - `223.255.255.255`，24位网络地址，8位主机地址，高位固定为 110 .
  - D 类地址，组播地址 `224.0.0.0` - `239.255.255.255`，该类型地址用于组播，高位 1110.
  - E 类地址，保留地址 `240.0.0.0` - `255.255.255.255`，广播地址，高位 1111.
  - 特殊的每个地址块的，**第一个和最后一个地址通常不实用**。

IP 分类带来了一些问题，即过多新网络的接入带来的成本。

**子网**用于在**几类网络的内部**进行进一步划分，通过子网号和主机号进行近一步的标示。子网寻址带来了灵活性，但是在网络的边界路由需要对子网进行划分。**子网掩码 SM** 由路由器和主机使用，确定一个IP地址的网络/子网部分的结束和主机部分的开始。例如一个B类地址 `128.32`，可以使用 任意超过 16 位的子网掩码进行划分，比如可以使用 24 位的子网掩码，划分为额外的 `2^8` 个子网，其中每个子网包括 `2^8` 台主机，对于该网络中的地址`128.32.1.8/24`，子网掩码为 `255.255.255.0`，`/24` 用于表示前缀长度，更加简洁。子网中的广播地址可以通过前缀长度快速计算，例如对于子网 `128.32.1.8/24`，其广播地址为 `128.32.1.255/24`，子网掩码为1的部分不变，其余位置为1。

**CIDR**及**CIDR掩码**：彻底的移除分类网络，直接使用掩码和前缀进行网络和主机的划分。

**可变长子网掩码LVSM**：即在网络内部可以划分变长的子网掩码，使每个子网支持不同数量的主机。

**运输层的多路复用（transport-layer multiplexing）与多路分解（demultiplexing）**：将主机间交付扩展到进程间交付。

UDP和TCP还可以通过在其报文段首部中包括差错检查字段而**提供完整性检查**。

进程到进程的**数据交付和差错检查**是两种最低限度的运输层服务，**UDP所能提供的仅有的两种服务**。

TCP还提供了其他的附加服务：

* **可靠的数据传输（reliable data transfer）**。通过使用流量控制，序号，确认和定时器，确保**正确地，按序地**将数据从发送进程交付给接受进程。从而TCP成为了可靠的额数据传输协议。
* TCP还提供**拥塞控制（congestion transfer）**

###3.2多路复用和多路分解
>
将由网络层提供的 主机到主机交付的服务 延伸到为运行在主机上的应用程序提供 进程到进程的交付服务。
>
在**接收主机**中的运输层实际上并没有直接将数据交付给进程，而是将数据交给了一个中间的**套接字**。任意时刻，接收主机上可能不止有一个套接字，所以每个套接字都有唯一的标识符。标识符的格式取决于它是UDP还是TCP套接字。
>
将运输层报文段中的数据交付到正确的套接字的工作称为**多路分解（demultiplexing）**
>
在源主机从不同套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为**多路复用（multiplexing）**

**运输层多路复用要求：**

* 1.套接字有唯一标识符
* 2.每个报文段有特殊字段来指示该报文段所要交付到的套接字。
	* 特殊字段是**源端口号**和**目的端口号**。它们各有16字节。
	
一个**UDP套接字**是由一个二元组来全面标识的，该二元组包含**一个目的IP地址和一个目的端口号**。源端口号将作为回复报文段的目的端口号。

一个**TCP套接字**是由一个四元组来表示的，该四元组包含**源IP地址，源端口号，目的IP地址，目的端口号**

###3.3无连接运输：UDP
>UDP的优点：
>
* 关于何时，发送什么数据的应用层控制更为精细。
* 无需建立连接。
* 无连接状态，一般能支持更多的活跃客户。
* 分组首部开销小。

运用在UDP上的重要应用有：**RIP路由选择表**的更新，**承载网络管理数据（SNMP）**，DNS。

提高UDP的性能可以加入**自适应的拥塞控制**。UDP也是可以实现有效传输的，通过在**应用程序**自身中建立可靠性机制来完成。

###3.3.1 UDP报文段结构
UDP报文段结构：**UDP首部+应用数据（报文段）**

UDP首部只有4个字段：**源端口号，目的端口号，长度，检验和**每个字段由两字节组成（16bit）。长度字段指示了**UDP报文段中的字节数（首部假数据）**

###3.3.2 UDP检验和
**UDP检验和提供了差错检测功能。**

UDP检验和的计算：对报文段中的所有16bit（这时候还没有校验码）的和进行反码，求和时遇到的任何溢出都被回卷（加到最后一位）。

如何检验：将检验和与其他的报文段的16bit进行家运算，结构肯定为1111111111111111（互为反码的的数相加）。如果出现非零数，那么就有错误。

###3.4可靠数据传输原理
**可靠数据传输协议（reliable data transfer protocol）。**可靠传输数据传输协议的下层协议也许是不可靠的，比如说IP协议。

**单向数据传递（unidirectional data transfer）**

**双向数据传递（bidirectional data transfer）**

###3.4.1构造可靠数据传输协议
####等停协议（wait-stop-protocol）
* rdt1.0：
	* 底层信道非常可靠
	* 无比特差错
	* 无分组丢失
	* 装发送方、接收方的单独FSM:
	*　发送方将数据发向底层信道
	* 接收方从底层信道读取数据
* rdt2.X：具有bit差错的信道 
	* ACK and NAK and seq
* rdt3.X：
	* 提供了计时器
	* 但是rdt的信道利用率很低。。。

####流水线协议（Pipelined protocol）
**Go-Back-N**（回退N）：
分组传输，在分组首部需要K比特序号，2^k=N，“窗口”最大为N, 允许N个连续的没有应答分组。当分组达到上限时，将等待接收方的ack应答，直到有空闲为止。

**SR（selective repeat）**

### TCP概述
**TCP首部20个字节（160bit），比UDP（四个字段每个两字节（64bit））多出12个字节**

* 点到点:
	* 　一个发送方, 一个接收方
	* 连接状态与端系统有关，不为路由器所知 
* 可靠、有序的字节流
	* 没有 “报文边界”
* 流水线:
	* TCP拥塞和流量控制设置滑动窗口协议
* 发送和接收缓冲区
* 全双工数据:
	* 同一连接上的双向数据流
	* **MSS: 最大报文段长度**
	* **MTU:最大传输单元**
* 面向连接: 
	* 在进行数据交换前，初始化发送方与接收方状态，进行握手(交换控制信息),
* 流量控制:
	* 发送方不能淹没接收方
	* TCP连接的接收方有1个接收缓冲区，发送方不能发送太多、太快的数据让接收方缓冲区溢出
* **拥塞控制:**
	* 抑止发送方速率来防止过分占用网络资源

**异步传递方式（ATM）**和网络中**可用比特率(ABR)**

**慢启动（Slow start），加性增乘性减（AIMD）**

##四 网络层
>从发送主机到接收主机传输段,在发送侧将段封装进数据报,在接收侧，向运输层交付段。网络层协议在**每台**主机、路由器中。当IP数据报通过路由器时，路由器检查所有数据报首部字段。

**datagram**:（数据报）

**forwarding**（转发）: 将分组从路由器的输入移动到适当的路由器输出

**routing**（选路）: 决定分组从源到目的地所采用的路由

**routing algorithm**：（路由选择算法）

**forwarding table**：（转发表）

**connection setup**：（建立连接）在数据报流动之前，两台主机和其间的路由器创建虚拟连接。
>网络层: 在两台主机之间**<--->**运输层: 在两个进程之间

**network service model:**（网络服务模型）：

* **因特网**
* **恒定比特率（constant bit rate，CBR)ATM网络服务**
* **可用比特率（available bit rate，ABR）ATM网络服务**

###网络层连接和无连接服务
**datagram network（数据报网络）：**提供网络层无连接服务

* 最长前缀匹配（longest prefix matching rule）

**virtual-circuit,VC网络（虚电路网络）：**提供网络层连接服务：
	
* 信令报文（signaling message）
* 信令协议（signaling protocol）

**路由器交换结构**

* 经内存交换
* 经总线交换:
	* 总线竞争: 交换速率受总线带宽限制
* 经互联网络的交换

### 网际协议 IP：因特网中的转发和编制）
**无类型域间选路(Classless InterDomain Routing,CIDR)**:因特网的地址分配策略。

**路由聚合（route aggregation）：**用单个网络前缀通告多个网络的能力。

**动态主机配置协议(Dynamic Host Configuration Protocol,DHCP)：即插即用（plug-and-play protocol）协议**

#### NAT 网络地址转换
- NAT: 简单的 NAT 实现。将内网主机的 ip 映射到不同的公网 ip。
- NAPT: 通过将内网主机的 ip 和端口映射到同一个公网ip的不同端口实现，解决 ipv4 地址资源枯竭。

NAT 的几种类型

- 锥形:
  - 完全锥形：内网主机的任意ip可以通过任意端口和任意的外网主机通讯，ip和端口都没有限制
  - 特定的内网主机，只能和某个特定的外网主机ip进行通讯。
  - 特定的
- 对称型:
  - 一台内网主机（特定ip），只能通过特定的端口和某个外网主机的 ip 的端口进行通讯，反之亦然。

**ICMP: 互联网控制报文协议**：被主机和路由器用来沟通网络层的信息。最典型的用途是错误报告。

###路由算法的区分：
* 一：
	* 全局式路由选择算法：
		* **A Link-State 选路算法**
	* 分散式路由选择算法：
		* **DV 距离向量**	
* 二：
	* 静态路由选择算法
	* 动态路由选择算法
* 三：
	* 负载敏感算法
	* 负载迟钝算法 

**自治系统（Autonomous System，AS）**

**自治系统内部路由选择协议（intra-autonomous system routing protocol）**

**网管路由器（gateway router）**

###路由选择协议
* **自治系统内部的路由选择协议（内部网关协议（interior gateway protocol））**
	* **RIP (routeing information protocol， 选路信息协议)**：在路由器收到**RIP通告（）**后会更新自己的RIP表。
	* **OSPF (open shortest path first，开放最短路优先)：**
		* 安全
		* 多条相同费用的路径
		* 对单播与多播路由选择的综合支持
		* 支持在单个路由选择域内的层次结构
* 自治系统直接的路由选择协议：
	* **BGP (broder gateway protocol，边界网关协议)**

###广播与多播路由选择
* **广播路由选择算法（broadcast routing）**
	* 受控洪泛
		* 序号受控洪泛
		* 反向路径转发
	* 生成树广播
* **多播路由选择（multicast routing）**

##五 链路层
**数据传输单元：frame**

**node结点**：运行链路层协议的任何设备

**link链路**：连接相邻结点的通信信道。

**链路层提供的服务：**

* 成帧（framing）
* 链路接入
* 可靠交付
* 差错检测和纠正

链路层在何处实现：主题部分是在**网络适配器（network adapter）又叫做（网络接口卡（network interface card，NIC））**

###差错检测和纠正技术
* 奇偶校验（parity check）：二维奇偶校验。
* **CRC**(Cyclic Redundancy Check）编码又叫多项式编码。

###多路访问链路和协议
**点对点链路（point-to-point link）**：
	
* **点对点协议（point-to-point protocol）**
* **高级数据链路公知（high-level data link control）**

**多路访问问题（multiple access problem）：**如何协调多个发送和接收结点对一个共享广播信道的访问。

**多路访问协议（multiple access protocol）：**结点通过这些协议来规范它们在共享的广播信道上的传输行为。

* **信道划分协议（channel partitioning protocol）**：划分信道，排除碰撞
* **随机接入协议（random access protocol）**：传输速率高，但可能有碰撞
* **轮流协议（taking-turns protocol）**：

####信道划分协议
**时分多路复用（TDM） 时间帧 时隙（slot）**：将时间划分为时间帧，每个节点对只在对应的时间帧内穿输数据（使用信道）。平均速率为R（总带宽）/N（结点数）。

**频分多路复用（FDM）：**将信道划分为不同的频段，每个结点一个频段。结点带宽限制为R/N。

**码分多址 CDMA ：**对每个结点分配一种不同的编码。

###随机接入协议
* **时隙ALOHA**：结点在一个**时隙开始时**传输整个数据帧，如果没碰撞速率为R，如果有碰撞，则在后续的时序中有p的概率得到重传，直到被无碰撞的传输。有大量结点需要传输时，效率为37%。
* **pure ALOHA：（纯ALOHA)**:结点收到上层的数据后，直接传输数据帧。效率为时隙ALOHA的一半。
* **CSMA（载波侦听多路访问）：**
	* 在传输前先侦听其它结点**（载波侦听）carrier sensing**
	* 在传输时一直监听信道**（碰撞检测）collision detector**



	 




